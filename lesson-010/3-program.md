# 任意阶幻方

## 参考资料

- https://www.geeksforgeeks.org/backtracking-introduction/

## 数据结构

幻方的所有数字以list存储，其对应的方形排列如下:

```
'''
3 x 3, index from 0:
0 1 2
3 4 5
6 7 8

4 x 4:
 0  1  2  3
 4  5  6  7
 8  9 10 11
12 13 14 15

5 x 5:
 0  1  2  3  4
 5  6  7  8  9
10 11 12 13 14
15 16 17 18 19
20 21 22 23 24
'''
```

## 幻方-对角线元素

```python
>>> range(0, 4 * 4, 5)
[0, 5, 10, 15]
>>> range(3, 4 * 4 - 1, 3)
[3, 6, 9, 12]
>>> 
>>> 
>>> def diagonal(n):
...     return [range(0, n * n, n + 1), range(n - 1, n * n - 1, n - 1)]
... 
>>> diagonal(3)
[[0, 4, 8], [2, 4, 6]]
>>> diagonal(4)
[[0, 5, 10, 15], [3, 6, 9, 12]]
>>> diagonal(5)
[[0, 6, 12, 18, 24], [4, 8, 12, 16, 20]]
>>> 
```

## 设计: 穷举算法 - 回溯

先以三阶幻方为例，描述生成算法:

```
1 2 3
1 2 4
...
1 6 9 2 3 4
...
1 5 9 2 6 7 3 4 8
...
1 6 9 2 5 8 
```

检查时机：

```
3(row), 6(row), 7(column, diagonal), 8(column), 9(row, column, diagonal)
```

初始化: []

逐步添加待定元素，如果不行，就回溯

